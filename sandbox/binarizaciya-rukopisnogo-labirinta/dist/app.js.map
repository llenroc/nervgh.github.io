{"version":3,"sources":["webpack:///webpack/bootstrap 41eb1ee87865b840e240","webpack:///c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/index.js","webpack:///c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Decoder.js","webpack:///c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Reader.js","webpack:///c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Matrix.js","webpack:///c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Cell.js","webpack:///c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Vector2.js","webpack:///c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Writer.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 41eb1ee87865b840e240\n **/","\r\n\r\nimport Decoder from './modules/Decoder';\r\n\r\n\r\nlet {document} = window;\r\nlet image = document.getElementById('original');\r\nlet stage = document.getElementById('stage');\r\n\r\n\r\nlet decoder = new Decoder();\r\n\r\ndecoder.reader.onReadComplete = function(image, matrix) {\r\n    matrix.normalize();\r\n    let map = new Map();\r\n    matrix.forEach(function(cell) {\r\n        let {rgba} = cell;\r\n        map.set(String(rgba), rgba);\r\n    });\r\n    for(let item of map.values()) {\r\n        console.log(item);\r\n    }\r\n\r\n    decoder.writer.writeAsCanvas(matrix, stage);\r\n};\r\n\r\ndecoder.reader.readAsMatrix(image);\r\n\n\n\n/** WEBPACK FOOTER **\n ** c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/index.js\n **/","'use strict';\r\n\r\n\r\nimport Reader from './Reader';\r\nimport Writer from './Writer';\r\n\r\n\r\nexport default class Decoder {\r\n    /**\r\n     *\r\n     */\r\n    constructor() {\r\n        this.reader = new Reader();\r\n        this.writer = new Writer();\r\n        //this.__matrix = undefined;\r\n        //this.reader.readAsMatrix(image);\r\n    }\r\n    decode() {\r\n\r\n    }\r\n    onDecodeComplete() {\r\n\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Decoder.js\n **/","'use strict';\r\n\r\n\r\nimport Matrix from './Matrix';\r\n\r\n\r\nlet {document} = window;\r\n\r\n\r\nexport default class Reader {\r\n    /**\r\n     *\r\n     */\r\n    constructor() {\r\n    }\r\n    /**\r\n     * @param {HTMLImageElement} image\r\n     */\r\n    readAsMatrix(image) {\r\n        image.addEventListener('load', this.__readAsMatrix.bind(this, image));\r\n    }\r\n    /**\r\n     * @param {HTMLImageElement} elementImage\r\n     * @private\r\n     */\r\n    __readAsMatrix(elementImage) {\r\n        let imageData = this.__getImageData(elementImage);\r\n        let matrix = new Matrix(imageData);\r\n        this.onReadComplete(elementImage, matrix);\r\n    }\r\n    /**\r\n     * @param {HTMLImageElement} elementImage\r\n     * @returns {ImageData}\r\n     * @private\r\n     */\r\n    __getImageData(elementImage) {\r\n        let {clientWidth, clientHeight, naturalWidth, naturalHeight} = elementImage;\r\n        let elementCanvas = document.createElement('canvas');\r\n        let context = elementCanvas.getContext('2d');\r\n        // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage\r\n        elementCanvas.setAttribute('width', clientWidth);\r\n        elementCanvas.setAttribute('height', clientHeight);\r\n        context.drawImage(elementImage, 0, 0, naturalWidth, naturalHeight, 0, 0, clientWidth, clientHeight);\r\n\r\n        // http://xiper.net/manuals/canvas/2D-api/getImageData\r\n        let imageData = context.getImageData(0, 0, clientWidth, clientHeight);\r\n\r\n        return imageData;\r\n    }\r\n    /**\r\n     * Callback\r\n     * @param {HTMLImageElement} image\r\n     * @param {Matrix} matrix\r\n     */\r\n    onReadComplete(image, matrix) {\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Reader.js\n **/","'use strict';\r\n\r\n\r\nimport Cell from './Cell';\r\nimport Vector2 from './Vector2';\r\n\r\n\r\nconst __PRIVATE = '__';\r\n\r\n\r\nexport default class Matrix {\r\n    /**\r\n     * @param {*} data\r\n     */\r\n    constructor(data) {\r\n        this[__PRIVATE] = Matrix.factory(data);\r\n    }\r\n    /**\r\n     *\r\n     */\r\n    destroy() {\r\n        let {data} = this[__PRIVATE];\r\n        data.length = 0;\r\n    }\r\n    /**\r\n     * @param {Number} rowIndex\r\n     * @param cellIndex\r\n     * @returns {*}\r\n     */\r\n    get(rowIndex, cellIndex) {\r\n        let {width, height, data} = this[__PRIVATE];\r\n        //cellIndex = Math.min(cellIndex, width);\r\n        //cellIndex = Math.max(cellIndex, 0);\r\n        //rowIndex = Math.min(rowIndex, height);\r\n        //rowIndex = Math.max(rowIndex, 0);\r\n        return data[rowIndex][cellIndex];\r\n    }\r\n    /**\r\n     * @returns {Number}\r\n     */\r\n    get width() {\r\n        let {width} = this[__PRIVATE];\r\n        return width;\r\n    }\r\n    /**\r\n     * @returns {Number}\r\n     */\r\n    get height() {\r\n        let {height} = this[__PRIVATE];\r\n        return height;\r\n    }\r\n    /**\r\n     * @param {Function} cb\r\n     */\r\n    forEach(cb) {\r\n        let {width, height} = this;\r\n        for(let i = 0; i < height; i++) {\r\n            for(let j = 0; j < width; j++) {\r\n                let cell = this.get(i, j);\r\n                cb(cell);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     */\r\n    normalize() {\r\n        const full = 255;\r\n        const half = full / 2;\r\n        let modify = (cell) => {\r\n            let {rgba} = cell;\r\n            let [r, g, b] = rgba;\r\n            r = r < half ? 0 : full;\r\n            g = g < half ? 0 : full;\r\n            b = b < half ? 0 : full;\r\n            let color = (r + g + b) < full ? 0 : full;\r\n            rgba[0] = rgba[1] = rgba[2] = color;\r\n        };\r\n        this.forEach(modify);\r\n    }\r\n    /**\r\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Pixel_manipulation_with_canvas#Grayscaling_and_inverting_colors\r\n     */\r\n    invert() {\r\n        const MAX = 255;\r\n        let modify = (cell) => {\r\n            let {rgba} = cell;\r\n            let [r, g, b] = rgba;\r\n            rgba[0] = MAX - r;\r\n            rgba[1] = MAX - g;\r\n            rgba[2] = MAX - b;\r\n        };\r\n        this.forEach(modify);\r\n    }\r\n    /**\r\n     * @see http://jscience.org/experimental/javadoc/org/jscience/computing/ai/vision/GreyscaleFilter.html\r\n     * @see http://www.johndcook.com/blog/2009/08/24/algorithms-convert-color-grayscale/\r\n     * @see http://www.had2know.com/technology/rgb-to-gray-scale-converter.html\r\n     */\r\n    greyscale() {\r\n        const R = 0.299;\r\n        const G = 0.587;\r\n        const B = 0.114;\r\n        let modify = (cell) => {\r\n            let {rgba} = cell;\r\n            let [r, g, b] = rgba;\r\n            let grey = Math.round(r * R + g * G + b * B);\r\n            rgba[0] = rgba[1] = rgba[2] = grey;\r\n        };\r\n        this.forEach(modify);\r\n    }\r\n    /**\r\n     * @returns {ImageData}\r\n     */\r\n    toImageData() {\r\n        const STEP = 4;\r\n        let {width, height} = this;\r\n        let array = new Uint8ClampedArray(width * height * STEP);\r\n        let c0 = 0; // counter\r\n        let c1 = 1; // counter\r\n        let c2 = 2; // counter\r\n        let c3 = 3; // counter\r\n        let callback = (cell) => {\r\n            let {rgba} = cell;\r\n            array[c0] = rgba[0];\r\n            array[c1] = rgba[1];\r\n            array[c2] = rgba[2];\r\n            array[c3] = rgba[3];\r\n            c0 += STEP;\r\n            c1 += STEP;\r\n            c2 += STEP;\r\n            c3 += STEP;\r\n        };\r\n        this.forEach(callback);\r\n        return new ImageData(array, width, height);\r\n    }\r\n    /**\r\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Pixel_manipulation_with_canvas\r\n     * @param {ImageData} imageData\r\n     * @returns {Object}\r\n     */\r\n    static fromImageData(imageData) {\r\n        const STEP = 4;\r\n        let {width, height, data} = imageData;\r\n        let c0 = 0; // counter\r\n        let c1 = 1; // counter\r\n        let c2 = 2; // counter\r\n        let c3 = 3; // counter\r\n        let rows = new Array(height);\r\n        for(let i = 0; i < height; i++) {\r\n            let cells = new Array(width);\r\n            for(let j = 0; j < width; j++) {\r\n                let rgba = [data[c0], data[c1], data[c2], data[c3]];\r\n                let vector = new Vector2(i, j);\r\n                cells[j] = new Cell(rgba, vector);\r\n                c0 += STEP;\r\n                c1 += STEP;\r\n                c2 += STEP;\r\n                c3 += STEP;\r\n            }\r\n            rows[i] = cells;\r\n        }\r\n        return {\r\n            width,\r\n            height,\r\n            data: rows\r\n        };\r\n    }\r\n    /**\r\n     * @param {*} data\r\n     * @returns {*}\r\n     */\r\n    static factory(data) {\r\n        return Matrix.fromImageData(data);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Matrix.js\n **/","'use strict';\r\n\r\n\r\nexport default class Cell {\r\n    /**\r\n     * @param {Object} rgba\r\n     * @param {Vector2} vector\r\n     */\r\n    constructor(rgba, vector) {\r\n        this.rgba = rgba;\r\n        this.vector = vector;\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Cell.js\n **/","'use strict';\r\n\r\n\r\nexport default class Vector2 {\r\n    /**\r\n     * @param {Number} x\r\n     * @param {Number} y\r\n     */\r\n    constructor(x = 0, y = 0) {\r\n        this[0] = x;\r\n        this[1] = y;\r\n    }\r\n    /**\r\n     * @returns {Vector2}\r\n     */\r\n    clone() {\r\n        return new Vector2(this[0], this[1]);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Vector2.js\n **/","'use strict';\r\n\r\n\r\nexport default class Writer {\r\n    /**\r\n     *\r\n     */\r\n    constructor() {\r\n    }\r\n    /**\r\n     * @param {Matrix} matrix\r\n     * @param {HTMLCanvasElement} elementCanvas\r\n     */\r\n    writeAsCanvas(matrix, elementCanvas) {\r\n        let context = elementCanvas.getContext('2d');\r\n        let imageData = matrix.toImageData();\r\n        var {width, height} = imageData;\r\n        elementCanvas.setAttribute('width', width);\r\n        elementCanvas.setAttribute('height', height);\r\n        context.putImageData(imageData, 0, 0);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** c:/OpenServer/domains/nervgh.io/sandbox/binarizaciya-rukopisnogo-labirinta/src/modules/Writer.js\n **/"],"sourceRoot":""}